<Window x:Class="TransparentVideoWindow.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:tb="http://www.hardcodet.net/taskbar"
        Title="Transparent Video Window"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="True"
        MouseDown="Window_MouseDown"
        MouseMove="Window_MouseMove"
        MouseUp="Window_MouseUp"
        Width="800" Height="600">
    <Grid>
        <!-- 右键菜单 -->
        <Grid.ContextMenu>
            <ContextMenu Name="Menu">
                <MenuItem Header="切换摄像头 Change Camera" Name="CameraListMenu"/>
                <MenuItem Header="退出 Exit" Click="ExitMenuItem_Click" />
                <MenuItem Header="帧率 Frame Rate" Name="FrameListMenu"/>
                <StackPanel Margin="5">
                    <TextBlock Text="放缩 Resize" FontWeight="Bold" FontSize="14" Margin="0,0,0,5"/>
                    <Slider Name="slider" 
                            IsSnapToTickEnabled="True" 
                            TickFrequency="0.2" 
                            Minimum="0.2" 
                            Maximum="3" 
                            Value="1" 
                            ValueChanged="ResizeForm" />
                    <TextBlock Name="SliderValueText" 
                           Text="{Binding PlacementTarget.slider.Value, RelativeSource={RelativeSource AncestorType=ContextMenu}, StringFormat=当前比例: {0:F1}x}" 
                           HorizontalAlignment="Center" 
                           FontSize="12" 
                           Margin="0,5,0,0"/>
                </StackPanel>
            </ContextMenu>
        </Grid.ContextMenu>

        <!-- 视频显示区域 -->
        <Image Name="VideoImage" Stretch="Fill" />
      

        <tb:TaskbarIcon x:Name="MyNotifyIcon"
                        Visibility="Visible"
                        ContextMenu="{Binding ElementName=Menu}"
                        PopupActivation="LeftOrRightClick" />
    </Grid>
</Window>
